## 請說明雜湊跟加密的差別在哪裡，為什麼密碼要雜湊過後才存入資料庫
雜湊與加密最主要的差異在於處理對象的不可逆性：
對稱與非對稱式加密法透過將欲處理的字串與使用者指定的密鑰組合後產生能夠解密的密碼，其安全性相當仰仗於密鑰的保存，因各式加密法的演算法都是公開的，只要密鑰遭到洩漏或是攔截就可能被破解。
雜湊法則是將欲處理的字串經過函式計算後最後產生不可逆、固定長度的字串，由於不存在密鑰，只有算法被破解才可能導致其內容洩漏，相較於用於保存機密文件的加密法，不可逆的雜湊法主要用於處理用戶密碼、檔案是否遭到竄改等不須檢視原字串的用途。
雖然兩者都透過複雜的算法將字串進行幾乎難以暴力破解的編碼處理，但隨著電腦硬體技術的進步以及專家團隊的研究，算法仍可能會隨著時間遭到破解（例如曾經是主流雜湊法的 MD5）。

現行主流將密碼經過雜湊後存入資料庫的做法，能夠將使用者登入時輸入的密碼雜湊後與資料庫中的字串比對，實現使用者驗證的功能，同時也能確保在資料庫洩漏時，使用者的密碼因雜湊的不可逆性質不會被洩漏、造成更多個人資料被外洩。
不過，若是單純將密碼雜湊後存入資料庫，若使用者使用的密碼過於簡單，仍有可能被攻擊者透過彩虹表（Rainbow table，針對常見、簡易密碼預先建立的雜湊碼比對資料庫）的方式破解，必須透過加鹽（Salt）的方式將字串與隨機字串拼接後再雜湊，以避免前述的攻擊方式、更進一步來說還可以使用 PBKDF2、Bcrypt 等具有迭代（反覆運算）性質的雜湊法增加被破解需要的時間，增加安全性。

## `include`、`require`、`include_once`、`require_once` 的差別
'require' 與 'include' 都是用於將外部檔案引入 PHP 程式的函式：
'include' 主要用於在程式中引入動態的程式碼，PHP 在執行階段時才會讀入 'include' 的內容。
'require' 主要用於在程式執行前引入靜態的程式碼，PHP 在編譯階段時就會將 'require' 的內容引入，會被視為原有的程式碼執行。
'require_once' 與 'include_once' 的作用與前兩者大致相同，但是它們會在執行前確認引入的檔案是否已經被引入過，以避免重複引入所產生的錯誤（例如函數被重複宣告）使得程式無法執行。


## 請說明 SQL Injection 的攻擊原理以及防範方法
SQL Injection 主要透過 SQL 字串串接的語法特性，在網頁中任何可能的輸入、傳送請求欄位中對 SQL 命令進行竄改，以進行非預期的存取、甚至對資料庫進行入侵。
舉例而言，在未加防範的情況下，SQL Injection 可以在登入頁面的輸入欄位中透過單引號、雙引號等跳脫字元終止原本的 SQL 指令，加入自行設計的 SQL 語句例如 OR 1=1，使判斷結果自動成立，在沒有正確帳號密碼的情況下登入。
SQL Injection 的防範方式主要有幾個方向：
其一是針對網頁中所有使用者傳遞的資訊進行處理及檢查。
例如 prepared statment 方法可以將字串固定以參數的形式傳入 SQL 語句中，使其不可能被視為是 SQL 語句的一部份（因為參數在語法檢查後、運行前才會被串入）。
此外也可以透過規範、驗證使用者的輸入格式、長度與型態來避免使用者傳入惡意的輸入內容，例如禁止使用者傳入過長的內容、禁止使用者在輸入中使用單引號等特殊字元。
其二則是資料庫中的預防。
設計者可以使用較不常見的名稱為資料庫的名稱與欄位命名，避免被能夠入侵資料庫的語句被嘗試出來。
同時，資料庫管理者也可以調整資料庫的存取權限，限縮使用者無法使用任何非預期所規劃的功能、例如關閉閱覽者的 insert 與 update 權限。

##  請說明 XSS 的攻擊原理以及防範方法
XSS 攻擊透過在網頁的輸入欄位、網址列等區塊中加入語法，以執行非預期的指令達到惡意存取網頁資料、或是將使用者導向其他頁面的效果。
舉例而言，在沒有防範的前提下，攻擊者僅僅需要在輸入欄位或網址中加入 <script> 與 </script>，便可以在兩者之間傳入任何它希望執行的 Javascript 指令，並且這些指令會在瀏覽器讀取網頁時被當作程式語法、而非文字字串，所以就會執行。
XSS 方法中存在許多種可能的攻擊形式，因此雖然可能透過限制使用者輸入的方式（例如禁止輸入特定字元，如「<」、「>」）來降低網站被攻擊的風險，但同時還是存在各種繞過這類限制的手法，例如將攻擊字串以不同方式（unicode、ASCII）編碼傳入。
因此，XSS 攻擊的主要防範形式還是在於對使用者輸入的輸出進行編譯（Encoding），將任何可能觸發 XSS 漏洞的輸入字串都處理（如將「<」轉換為「&lt;」）後才進行輸出，以確保瀏覽器在讀取時會把這些內容都視為字串而非程式碼。


## 請說明 CSRF 的攻擊原理以及防範方法
CSRF 攻擊透過偽裝的惡意網站或連結，不當利用使用者在瀏覽目標網站時留下的 cookie 或其他憑證資訊，使其得以通過目標網站的身分安全認證、偽裝成使用者向目標網站發送各種請求。
舉例而言，攻擊者可以利用聳動的標題誘使使用者點擊含有惡意請求的連結、或是在網站中利用隱藏圖片、表單的形式在使用者不知不覺之間發送惡意請求，此時只要使用者原先瀏覽目標網站的憑證尚未過期，他就可能被攻擊者偽裝身分進行帳戶轉帳、修改帳戶資料等攻擊行為。
防禦 CSRF 攻擊的做法主要是加強網站的身分驗證機制，網站的身分驗證不應只確認請求發送者是否具有合法的 session_id，可行的加強方式包含：
1.檢查請求的 header 中 referer 欄位的內容是否合法，確認使用者是在原本的網站送出請求。
→此方法的漏洞在於不是所有使用者都會開啟在請求時送出 referer 的功能，可能造成誤判、檢查 referer 的判斷式也可能會有漏洞。
2.加上圖形驗證碼等多重驗證機制：由於這類驗證會在目標網頁上動態產生，攻擊者無法取得正確的驗證碼。
→此方法目前沒有明確的漏洞，然而會增加使用者瀏覽網站的麻煩度。
3.使用 CSRF token 機制：在目標網站的請求送出時額外帶上亂數產生的 token 進行驗證，並在驗證完成後立刻刪除。
→若你的後端接受 cross origin 的請求，此方法仍有可能被突破。
4.Double Submit Cookie：將 CSRF token 儲存在 cookie 中，透過瀏覽器無法偽造 domain 的特性解決方法3 的 cross origin 問題（也可以在使用者的客戶端產生）
→仍存在可能從 subdomain 突破的漏洞（關鍵字：子網域挾持），此漏洞利用網站 cookie 在整個網域共享的 SSO（單點登入） 特性取得使用者的 cookie。
5.瀏覽器的 sameisite cookie 機制：透過瀏覽器內建的 samesite 功能阻止任何來自非目標網域的請求。
→執行方式相對容易，可以選擇將進行重要操作時額外產生一組 cookie，以較嚴格的 strict 模式驗證、或使用較寬鬆的 lax 模式，即可在一組 cookie 下完成驗證，但要搭配前述的其他防禦方式使用。

參考資料：
[身為 Web 工程師，你一定要知道的幾個 Web 資訊安全議題](https://medium.com/starbugs/%E8%BA%AB%E7%82%BA-web-%E5%B7%A5%E7%A8%8B%E5%B8%AB-%E4%BD%A0%E4%B8%80%E5%AE%9A%E8%A6%81%E7%9F%A5%E9%81%93%E7%9A%84%E5%B9%BE%E5%80%8B-web-%E8%B3%87%E8%A8%8A%E5%AE%89%E5%85%A8%E8%AD%B0%E9%A1%8C-29b8a4af6e13)
[雜湊不是加密，雜湊不是加密，雜湊不是加密。](https://dotblogs.com.tw/regionbbs/2017/09/21/hashing_is_not_encryption)
[加密和雜湊有什麼不一樣？](https://blog.m157q.tw/posts/2017/12/25/differences-between-encryption-and-hashing/)
[一次搞懂密碼學中的三兄弟 — Encode、Encrypt 跟 Hash](https://medium.com/starbugs/what-are-encoding-encrypt-and-hashing-4b03d40e7b0c)
[如何安全的加密使用者的密碼 使用pdbdf2](https://hackmd.io/@Not/SyCZ0l7kv)
[Day14|密碼學初探(7)：非對稱加密與數位簽章](https://ithelp.ithome.com.tw/articles/10215109)
[對稱加密vs非對稱加密](https://academy.binance.com/zt/articles/symmetric-vs-asymmetric-encryption)
[避免網站遭受SQL Injection攻擊的10個步驟](https://www.gss.com.tw/images/stories/epaper_GSS_security/pdf/epaper_gss_security_0072.pdf)
[XSS攻擊的深入探討與防護之道](https://www.qa-knowhow.com/?p=2992)
[HTML <iframe> 內嵌框架 (Inline Frame)](https://www.fooish.com/html/iframe-tag.html)
[[Day9] - CSRF(Cross Site Request Forgery) ](https://ithelp.ithome.com.tw/articles/10241830)

[web 安全系列-15-subdomain takeover 子域劫持](https://houbb.github.io/2020/08/09/web-safe-15-subdomain-takeover)
[讓我們來談談 CSRF](https://blog.techbridge.cc/2017/02/25/csrf-introduction/)
[技術分享：從開發角度淺談CSRF攻擊及防禦](https://kknews.cc/zh-tw/tech/v56xrl.html)